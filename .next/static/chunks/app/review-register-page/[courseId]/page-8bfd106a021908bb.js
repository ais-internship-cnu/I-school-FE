(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115],{8379:function(e,t,r){Promise.resolve().then(r.bind(r,153))},8836:function(e,t,r){"use strict";r.r(t);var a=r(7437),s=r(828),n=r(4298);t.default=e=>{let{title:t,children:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("title",{children:"".concat(t)}),(0,a.jsx)(s.zt,{store:n.h,children:r})]})}},153:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),s=r(8836),n=r(2508),o=r(3206),c=r(9835),i=r(7907);r(1316);var u=r(1291),l=()=>{let e=(0,i.useRouter)();return(0,a.jsxs)(n.ZP,{container:!0,alignItems:"center",className:"register-header-container",children:[(0,a.jsx)(n.ZP,{item:!0,xs:4,container:!0,justifyContent:"flex-start",children:(0,a.jsx)(o.Z,{onClick:()=>{e.back()},children:(0,a.jsx)(u.Z,{})})}),(0,a.jsx)(n.ZP,{item:!0,xs:4,container:!0,justifyContent:"center",children:(0,a.jsx)(c.Z,{variant:"h6",className:"rating-title",children:"강의평 등록"})}),(0,a.jsx)(n.ZP,{item:!0,xs:4})]})},d=r(7957),f=r(4272),h=r(343),m=r(1444),g=r(6285),b=r(2035),p=r(2265),v=r(2670),C=r(1991),E=()=>{var e;let[t]=(0,p.useState)(""),{onCreateReview:r}=(0,b.Z)(),{courseId:s}=(0,i.useParams)(),n=Number(s),o=C.Ry().shape({rating:C.Rx().typeError("숫자로 적어주세요").min(1,"평점을 입력해주세요").max(5,"5이하 값을 넣어주세요").required("평점을 입력해주세요"),content:C.Z_().typeError("강의평을 입력해주세요").max(256,"256자 이내로 적어주세요").required("강의평을 입력해주세요")}),{setValue:c,handleSubmit:u,register:l,formState:{errors:E,isValid:x},reset:y,watch:R}=(0,v.cI)({mode:"all",resolver:(0,d.X)(o),defaultValues:{rating:0,content:""}}),S=R("rating",0);return(0,a.jsxs)("form",{onSubmit:u(e=>{let a={...e,course_id:n};console.log("Food: ".concat(t,", Img: ").concat(S,", course_id: ").concat(n)),r(a),y()}),children:[(0,a.jsxs)(f.Z,{className:"star-rating",children:[(0,a.jsx)(h.Z,{name:"course-rating",value:S,onChange:(e,t)=>{c("rating",t||0)},size:"large",precision:1}),E.rating&&(0,a.jsx)("p",{children:E.rating.message})]}),(0,a.jsx)(m.Z,{multiline:!0,rows:8,variant:"filled",fullWidth:!0,placeholder:"이 강의에 대한 총평을 작성해주세요.",...l("content"),className:"rating-textarea",helperText:null===(e=E.content)||void 0===e?void 0:e.message}),(0,a.jsx)(g.Z,{className:"submit-button",type:"submit",children:"등록"})]})},x=()=>(0,a.jsxs)(s.default,{title:"ReviewRegisterPage",children:[(0,a.jsx)(l,{}),(0,a.jsx)(E,{})]})},5721:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});let a={COURSER_REVIEW:"/api/v1/course-reviews",COURSE_LIST:"http://3.27.241.70:8000/api/v1/courses",SHOW_TIMETABLE:"/api/v1/timetables/1",REVIEW_REGISTER:"/api/v1/course-reviews"}},2035:function(e,t,r){"use strict";var a=r(828),s=r(719);t.Z=()=>{let e=(0,a.I0)(),{reviewList:t}=(0,a.v9)(s.XB);return{onCreateReviewList:(t,r)=>{e((0,s.kG)({courseName:t,professor:r}))},reviewList:t,onCreateReview:t=>{let{content:r,rating:a,course_id:n}=t;e((0,s.O9)({content:r,rating:a,course_id:n}))}}}},1777:function(e,t,r){"use strict";r.d(t,{gS:function(){return c}});var a=r(8166),s=r(5721),n=r(4431),o=r(7564);let c=(0,a.hg)("courses/fetchCourses",async(e,t)=>{let{rejectWithValue:r}=t;try{let e=await n.h.get(s.b.COURSE_LIST),t=(0,o.T)(e.data);return console.log(t.data.courses),t.data.courses}catch(e){return r(e instanceof Error?e.message:"An error has occurred.")}}),i=(0,a.oM)({name:"courses",initialState:{courseList:[]},reducers:{},extraReducers:e=>{e.addCase(c.fulfilled,(e,t)=>{e.courseList=t.payload}).addCase(c.rejected,(e,t)=>{console.error(t.payload)})}});t.ZP=i.reducer},719:function(e,t,r){"use strict";r.d(t,{O9:function(){return i},XB:function(){return l},kG:function(){return c}});var a=r(8166),s=r(5721),n=r(4431),o=r(7564);let c=(0,a.hg)("review/createReviewList",async(e,t)=>{let{rejectWithValue:r}=t;try{let t=decodeURIComponent(e.courseName),r=decodeURIComponent(e.professor),a=await n.h.get(s.b.COURSER_REVIEW,{params:{course_name:t,professor:r}});return Array.isArray(a.data.data.course_reviews)?a.data.data.course_reviews.map(e=>({...(0,o.T)(e),courseReviewId:e.course_id})):[]}catch(e){return r(e instanceof Error?e.message:"An error has occurred.")}}),i=(0,a.hg)("registration/createCourseReview",async(e,t)=>{let{rejectWithValue:r}=t;try{let t=await n.h.post(s.b.REVIEW_REGISTER,e);console.log(t.status),alert("등록되었습니다.")}catch(e){if(e.response){let{status:t}=e.response;switch(t){case 400:alert("중복된 값입니다.");break;case 401:alert("인증에 실패했습니다.");break;case 403:alert("접근 권한이 없습니다.");break;case 404:alert("리소스를 찾을 수 없습니다.");break;case 500:alert("서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.");break;default:alert("알 수 없는 오류가 발생했습니다. 잠시 후 다시 시도해주세요.")}return r(e.response.data)}return e.request?alert("서버로부터 응답이 없습니다. 네트워크 상태를 확인해주세요."):alert("요청을 보내는 중에 오류가 발생했습니다."),console.log(e.message),r(e instanceof Error?e.message:"An error has occurred.")}}),u=(0,a.oM)({name:"review",initialState:{reviewList:[]},reducers:{},extraReducers:e=>{e.addCase(c.fulfilled,(e,t)=>{e.reviewList=Array.isArray(t.payload)?t.payload:[]}).addCase(c.rejected,e=>{e.reviewList=[]})}}),l=e=>e.review;t.ZP=u.reducer},9892:function(e,t,r){"use strict";r.d(t,{Cr:function(){return c},Ut:function(){return u}});var a=r(8166),s=r(5721),n=r(4431),o=r(7564);let c=(0,a.hg)("bottomSheet/createBottomSheetCourseList",async(e,t)=>{let{rejectWithValue:r}=t;try{let e=await n.h.get(s.b.COURSE_LIST);return(0,o.T)(e.data).data.courses}catch(e){return r(e instanceof Error?e.message:"An error has occurred.")}}),i=(0,a.oM)({name:"bottomSheetCourse",initialState:{bottomSheetCourseList:[]},reducers:{},extraReducers:e=>{e.addCase(c.fulfilled,(e,t)=>{e.bottomSheetCourseList=t.payload}).addCase(c.rejected,(e,t)=>{console.error(t.payload)})}}),u=e=>e.bottomSheetCourses.bottomSheetCourseList;t.ZP=i.reducer},3848:function(e,t,r){"use strict";r.d(t,{Ut:function(){return l},cS:function(){return i},rt:function(){return c}});var a=r(8166),s=r(5721),n=r(4431),o=r(7564);let c=(0,a.hg)("timetable/createTimetableList",async(e,t)=>{let{rejectWithValue:r}=t;try{let e=await n.h.get(s.b.SHOW_TIMETABLE);return(0,o.T)(e.data)}catch(e){return r(e instanceof Error?e.message:"An error has occurred.")}}),i=(0,a.hg)("registration/postCourseCode",async(e,t)=>{let{rejectWithValue:r}=t;try{let t=await n.h.post(s.b.SHOW_TIMETABLE,e);console.log(t.status),alert("등록되었습니다.")}catch(e){if(e.response){let{status:t}=e.response;switch(t){case 400:alert("중복된 값입니다.");break;case 401:alert("인증에 실패했습니다.");break;case 403:alert("접근 권한이 없습니다.");break;case 404:alert("리소스를 찾을 수 없습니다.");break;case 500:alert("서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.");break;default:alert("알 수 없는 오류가 발생했습니다. 잠시 후 다시 시도해주세요.")}return r(e.response.data)}return e.request?alert("서버로부터 응답이 없습니다. 네트워크 상태를 확인해주세요."):alert("요청을 보내는 중에 오류가 발생했습니다."),console.log(e.message),r(e instanceof Error?e.message:"An error has occurred.")}}),u=(0,a.oM)({name:"timetable",initialState:{timetableList:[]},reducers:{},extraReducers:e=>{e.addCase(c.fulfilled,(e,t)=>{e.timetableList=t.payload.data.courses}).addCase(c.rejected,e=>{e.timetableList=[]})}}),l=e=>e.timetable;t.ZP=u.reducer},4298:function(e,t,r){"use strict";r.d(t,{h:function(){return d},I0:function(){return f}});var a=r(8166),s=r(3646),n=r(719),o=r(3848),c=r(1777),i=r(9892);let u=(0,s.UY)({review:n.ZP,timetable:o.ZP,courses:c.ZP,bottomSheetCourses:i.ZP});var l=r(828);let d=(0,a.xC)({reducer:u}),f=()=>(0,l.I0)()},4431:function(e,t,r){"use strict";r.d(t,{h:function(){return s}});var a=r(7908);r(9704),r(5721);let s=a.Z.create({baseURL:"http://3.27.241.70:8000/"})},7564:function(e,t,r){"use strict";r.d(t,{T:function(){return a}});let a=e=>{if(Array.isArray(e))return e.map(e=>a(e));if(null!==e&&e.constructor===Object){let t={};return Object.keys(e).forEach(r=>{t[r.replace(/_([a-z])/g,(e,t)=>t.toUpperCase())]=a(e[r])}),t}return e}},1316:function(){}},function(e){e.O(0,[390,194,229,684,343,98,640,971,69,744],function(){return e(e.s=8379)}),_N_E=e.O()}]);